'use strict';Object.defineProperty(exports,'__esModule',{value:!0});var _termExpander=require('./term-expander.js'),_termExpander2=_interopRequireDefault(_termExpander),_tokenExpander=require('./token-expander'),_tokenExpander2=_interopRequireDefault(_tokenExpander),_ramda=require('ramda'),_=_interopRequireWildcard(_ramda);function _interopRequireWildcard(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b.default=a,b}function _interopRequireDefault(a){return a&&a.__esModule?a:{default:a}}class Compiler{constructor(a,b,c,d){this.phase=a,this.env=b,this.store=c,this.context=d}compile(a){let b=new _tokenExpander2.default(_.merge(this.context,{phase:this.phase,env:this.env,store:this.store})),c=new _termExpander2.default(_.merge(this.context,{phase:this.phase,env:this.env,store:this.store}));return b.expand(a).map(d=>c.expand(d))}}exports.default=Compiler;

