'use strict';Object.defineProperty(exports,'__esModule',{value:!0});var _sweetSpec=require('sweet-spec'),S=_interopRequireWildcard(_sweetSpec);function _interopRequireWildcard(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b.default=a,b}exports.default=class extends S.default.CloneReducer{constructor(a,b){super(),this.scopes=a,this.bindings=b}applyScopes(a){return this.scopes.reduce((b,c)=>{return b.addScope(c.scope,this.bindings,c.phase,{flip:c.flip})},a)}reduceBindingIdentifier(a,b){return new S.BindingIdentifier({name:this.applyScopes(b.name)})}reduceIdentifierExpression(a,b){return new S.IdentifierExpression({name:this.applyScopes(b.name)})}reduceRawSyntax(a,b){return b.value.isTemplate()&&(b.value.token.items=b.value.token.items.map(c=>{return c instanceof S.default?c.reduce(this):c})),new S.RawSyntax({value:this.applyScopes(b.value)})}};

