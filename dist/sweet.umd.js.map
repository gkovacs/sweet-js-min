{"version":3,"file":"sweet.umd.js","sources":["../build/src/sweet.js"],"sourcesContent":["\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.expand = expand;\nexports.parse = parse;\nexports.compile = compile;\n\nvar _shiftReader = require(\"./shift-reader\");\n\nvar _shiftReader2 = _interopRequireDefault(_shiftReader);\n\nvar _expander = require(\"./expander\");\n\nvar _expander2 = _interopRequireDefault(_expander);\n\nvar _immutable = require(\"immutable\");\n\nvar _syntax = require(\"./syntax\");\n\nvar _syntax2 = _interopRequireDefault(_syntax);\n\nvar _env = require(\"./env\");\n\nvar _env2 = _interopRequireDefault(_env);\n\nvar _shiftReducer = require(\"shift-reducer\");\n\nvar _shiftReducer2 = _interopRequireDefault(_shiftReducer);\n\nvar _parseReducer = require(\"./parse-reducer\");\n\nvar _parseReducer2 = _interopRequireDefault(_parseReducer);\n\nvar _shiftCodegen = require(\"shift-codegen\");\n\nvar _shiftCodegen2 = _interopRequireDefault(_shiftCodegen);\n\nvar _scope = require(\"./scope\");\n\nvar _bindingMap = require(\"./binding-map.js\");\n\nvar _bindingMap2 = _interopRequireDefault(_bindingMap);\n\nvar _terms = require(\"./terms\");\n\nvar _terms2 = _interopRequireDefault(_terms);\n\nvar _modules = require(\"./modules\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction expand(source_521) {\n  var options_522 = arguments.length <= 1 || arguments[1] === undefined ? {} : arguments[1];\n  var reader_523 = new _shiftReader2.default(source_521);var stxl_524 = reader_523.read();var scope_525 = (0, _scope.freshScope)(\"top\");var bindings_526 = new _bindingMap2.default();var expander_527 = new _expander2.default({ env: new _env2.default(), store: new _env2.default(), bindings: bindings_526, cwd: options_522.cwd, modules: new _modules.Modules(), currentScope: [scope_525], transform: options_522.transform ? options_522.transform : function (x_529) {\n      return { code: x_529 };\n    }, moduleResolver: options_522.moduleResolver, moduleLoader: options_522.moduleLoader });var exStxl_528 = expander_527.expand(stxl_524.map(function (s) {\n    return s.addScope(scope_525, bindings_526);\n  }));return new _terms2.default(\"Module\", { directives: (0, _immutable.List)(), items: exStxl_528 });\n}function parse(source_530) {\n  var options_531 = arguments.length <= 1 || arguments[1] === undefined ? {} : arguments[1];\n  return (0, _shiftReducer2.default)(new _parseReducer2.default(), expand(source_530, options_531));\n}function compile(source_532) {\n  var options_533 = arguments.length <= 1 || arguments[1] === undefined ? {} : arguments[1];\n  var ast_534 = parse(source_532, options_533);var gen_535 = (0, _shiftCodegen2.default)(ast_534);return options_533.transform ? options_533.transform(gen_535, { presets: [\"es2015\"] }) : { code: gen_535 };\n}"],"names":[],"mappings":"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"}